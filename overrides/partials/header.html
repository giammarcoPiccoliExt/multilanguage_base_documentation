

{% block header %}
  <header class="md-header" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="{{ lang.t('header') }}">
      
      <!-- Link to home -->
      <a href="{{ config.site_url | d(nav.homepage.url, true) | url }}" 
         title="{{ config.site_name | e }}" 
         class="md-header__button md-logo" 
         aria-label="{{ config.site_name }}" 
         data-md-component="logo">
        {% include "partials/logo.html" %}
      </a>
      
      <!-- Header title -->
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
              {{ config.site_name }}
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            <span class="md-ellipsis">
              {% if page.title and not page.is_homepage %}
                {{ page.title }}
              {% else %}
                {{ config.site_name }}
              {% endif %}
            </span>
          </div>
        </div>
      </div>
      
      <!-- Color palette toggle -->
      {% if config.theme.palette %}
        {% if not config.theme.palette is mapping %}
          {% for palette in config.theme.palette %}
            {% set primary = palette.primary | replace(" ", "-") | lower %}
            {% set accent  = palette.accent  | replace(" ", "-") | lower %}
            {% if palette.toggle %}
              <input class="md-toggle md-toggle--palette" 
                     data-md-toggle="palette" 
                     type="checkbox" 
                     id="__palette_{{ loop.index }}"
                     {% if loop.first %} checked {% endif %}>
              <label class="md-header__button md-icon" 
                     title="{{ palette.toggle.name }}" 
                     for="__palette_{{ loop.index0 if loop.length > 1 else 1 }}" 
                     hidden>
                {% include ".icons/" ~ palette.toggle.icon ~ ".svg" %}
              </label>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endif %}
      
      <!-- Search interface -->
      {% if config.plugins.search %}
        <label class="md-header__button md-icon" for="__search">
          {% include ".icons/material/magnify.svg" %}
        </label>
        {% include "partials/search.html" %}
      {% endif %}
      
      <!-- Repository information -->
      {% if config.repo_url %}
        <div class="md-header__source">
          {% include "partials/source.html" %}
        </div>
      {% endif %}
    </nav>
    
    <!-- Navigation tabs (collapsible) -->
    {% if "navigation.tabs.sticky" in config.theme.features %}
      {% if "navigation.tabs" in config.theme.features %}
        {% include "partials/tabs.html" %}
      {% endif %}
    {% endif %}
  </header>
{% endblock %}