{"openapi":"3.1.0","info":{"title":"External Report Manager API","contact":{"name":"API Support","url":"http://exampleurl.com/contact","email":"carmelo.sciuto@cybersecurity.leonardocompany.com"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0.html"},"version":"0.0.1"},"servers":[{"url":"http://localhost:9098/","description":"localhost"},{"url":"https://cmp-sspa-dev3.westeurope.cloudapp.azure.com/api/rmreport/","description":"develop"}],"tags":[{"name":"Report","description":"CMP Reports Endpoint"}],"paths":{"/scheduling":{"post":{"tags":["report-scheduling-controller"],"summary":"Upserts a report schedule","operationId":"upsertSchedule","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportSchedule"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK"}}}},"/scheduling/plan":{"post":{"tags":["report-scheduling-controller"],"summary":"Schedules a report","operationId":"planSchedule","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduledReportRequest"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK"}}}},"/reporting/start":{"post":{"tags":["report-controller"],"summary":"Generates a request for a report data","operationId":"generateTable","parameters":[{"name":"crossTenant","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"app-lang","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestReportDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RequestReportBean"}}}}}}},"/scheduling/{id}":{"get":{"tags":["report-scheduling-controller"],"summary":"Finds a report schedule by id","operationId":"findSchedule","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ReportSchedule"}}}}}},"delete":{"tags":["report-scheduling-controller"],"summary":"Deletes a report schedule by id","operationId":"deleteSchedule","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK"}}}},"/scheduling/{id}/report":{"get":{"tags":["report-scheduling-controller"],"summary":"Gets the report bond to schedule by id","operationId":"findScheduleReport","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SelectBean"}}}}}}},"/scheduling/history":{"get":{"tags":["report-scheduling-controller"],"summary":"Finds report schedule list","operationId":"scheduleHistory","parameters":[{"name":"reportType","in":"query","required":false,"schema":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReportSchedule"}}}}}}}},"/scheduling/cronTabs":{"get":{"tags":["report-scheduling-controller"],"summary":"Gets available cron tabs","operationId":"scheduleCronTabs","parameters":[{"name":"app-lang","in":"header","required":false,"schema":{"type":"string","default":"en"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object","additionalProperties":{"type":"string"}}}}}}}}},"/scheduling/compute-schedule-date":{"get":{"tags":["report-scheduling-controller"],"summary":"Computes specific prev/next date by cron trigger string","operationId":"computeStartScheduleByPeriod","parameters":[{"name":"cronPeriod","in":"query","required":true,"schema":{"type":"string"}},{"name":"isNext","in":"query","required":false,"schema":{"type":"boolean","default":false}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SelectBean"}}}}}}},"/reporting/types":{"get":{"tags":["report-controller"],"summary":"Gets available report types","operationId":"getReportTypes","parameters":[{"name":"type","in":"query","required":false,"schema":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]}},{"name":"app-lang","in":"header","required":false,"schema":{"type":"string","default":"en"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReportConfig"}}}}}}}},"/reporting/print/{id}/{reportFormat}":{"get":{"tags":["report-controller"],"summary":"Gets a report file by id","operationId":"print","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"reportFormat","in":"path","required":true,"schema":{"type":"string"}},{"name":"crossTenant","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"app-lang","in":"header","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"503":{"description":"Service Unavailable","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/reporting/history":{"get":{"tags":["report-controller"],"summary":"Gets a report list by specified report type","operationId":"historyReports","parameters":[{"name":"items","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"reportType","in":"query","required":false,"schema":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]}},{"name":"subCategory","in":"query","required":false,"schema":{"type":"string"}},{"name":"crossTenant","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PagedListDTO"}}}}}}},"/reporting/download/{id}":{"get":{"tags":["report-controller"],"summary":"Gets a report by id","operationId":"getReport","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"crossTenant","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"app-lang","in":"header","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseReportBean"}}}}}}},"/reporting/download/{id}/{reportFormat}":{"get":{"tags":["report-controller"],"summary":"Gets a report file by id","operationId":"getReportPdf","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"reportFormat","in":"path","required":true,"schema":{"type":"string"}},{"name":"crossTenant","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"app-lang","in":"header","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"503":{"description":"Service Unavailable","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/reporting/{id}":{"delete":{"tags":["report-controller"],"summary":"Deletes a report by its request id","operationId":"deleteReport","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"crossTenant","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"X-Tenant","in":"header","required":false,"schema":{"type":"string","default":"resources"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK"}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"errorCode":{"type":"string"},"message":{"type":"string"}}},"ReportSchedule":{"type":"object","properties":{"id":{"type":"string"},"requestId":{"type":"string"},"reportType":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]},"firstScheduleDate":{"type":"string","format":"date-time"},"lastScheduleDate":{"type":"string","format":"date-time"},"endScheduleDate":{"type":"string","format":"date-time"},"creationDate":{"type":"string","format":"date-time"},"scheduleInterval":{"type":"integer","format":"int32"},"rangeType":{"type":"string"},"frequency":{"type":"string"},"period":{"type":"string"},"lang":{"type":"string"},"fileFormats":{"type":"array","items":{"type":"string"}},"userEmails":{"type":"array","items":{"type":"string"}},"sendable":{"type":"boolean"},"sendNow":{"type":"boolean"},"withLimitedCostView":{"type":"boolean"}}},"Filter":{"type":"object","properties":{"name":{"type":"string"},"value":{},"valueAsString":{"type":"string"}}},"RequestReportDTO":{"type":"object","properties":{"id":{"type":"string"},"reportType":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]},"subCategory":{"type":"string"},"creationDate":{"type":"string","format":"date-time"},"dateFrom":{"type":"string"},"dateTo":{"type":"string"},"status":{"type":"string","enum":["PROCESSING","READY","ERROR"]},"report":{"type":"string"},"filters":{"type":"array","items":{"$ref":"#/components/schemas/Filter"}}}},"ScheduledReportRequest":{"type":"object","properties":{"requestReport":{"$ref":"#/components/schemas/RequestReportDTO"},"reportSchedule":{"$ref":"#/components/schemas/ReportSchedule"}}},"RequestReportBean":{"type":"object","properties":{"id":{"type":"string"},"reportType":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]},"subCategory":{"type":"string"},"creationDate":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["PROCESSING","READY","ERROR"]},"report":{"type":"string"},"filters":{"type":"array","items":{"$ref":"#/components/schemas/Filter"}},"haveLimitedCost":{"type":"boolean"}}},"SelectBean":{"type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"}}},"HeaderReport":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"},"hiddenOnTable":{"type":"boolean","writeOnly":true}}},"ReportConfig":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"category":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]},"subCategory":{"type":"string"},"lang":{"type":"string"},"header":{"type":"array","items":{"$ref":"#/components/schemas/HeaderReport"}},"filters":{"type":"array","items":{"$ref":"#/components/schemas/ReportFilter"}},"headerMap":{"type":"object","additionalProperties":{"type":"string"}}}},"ReportFilter":{"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string"},"values":{"type":"array","items":{"type":"string"}}}},"PagedListDTO":{"type":"object","properties":{"resources":{},"total":{"type":"integer","format":"int64"}}},"ResponseReportBean":{"type":"object","properties":{"id":{"type":"string"},"reportType":{"type":"string","enum":["COST","INVENTORY","MONITORING","CATALOG"]},"subCategory":{"type":"string"},"reportTitle":{"type":"string"},"reportDescription":{"type":"string"},"reportHeader":{"type":"array","items":{"$ref":"#/components/schemas/HeaderReport"}},"rows":{"type":"array","items":{"$ref":"#/components/schemas/RowTable"}},"filters":{"type":"array","items":{"$ref":"#/components/schemas/Filter"}},"creationDate":{"type":"string","format":"date-time"},"dateFrom":{"type":"string"},"dateTo":{"type":"string"},"totalCost":{"type":"number","format":"double"},"totalCostCMP":{"type":"number","format":"double"},"totalCostAgreed":{"type":"number","format":"double"}}},"RowTable":{"type":"object","properties":{"typeProvider":{"type":"string"},"nameProvider":{"type":"string"}}}}}}